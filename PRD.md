# PRD: 중세 판타지 오토배틀러 미니게임

## 1. 개요

### 1.1 제품 비전
Team Fight Tactics(TFT)에서 영감을 받은 웹 기반 오토배틀러 미니게임. 중세 판타지 세계관에서 유닛을 수집하고 배치하여 적 웨이브를 물리치는 전략 게임.

### 1.2 목표
- 브라우저에서 바로 플레이 가능한 경량 오토배틀러
- 1회 플레이 10~15분 내외의 미니게임
- HTML/CSS/JavaScript만으로 구현

### 1.3 타겟 플랫폼
- 데스크톱 웹 브라우저 (Chrome, Firefox, Edge, Safari)
- 모바일 웹 브라우저 지원

---

## 2. 게임 규칙

### 2.1 게임 흐름
```
[게임 시작] → [준비 페이즈] → [전투 페이즈] → [결과] → [다음 라운드 또는 게임 종료]
```

1. **준비 페이즈** (30초)
   - 상점에서 유닛 구매
   - 유닛 배치/재배치
   - 리롤, 경험치 구매

2. **전투 페이즈** (자동 진행)
   - 배치된 유닛이 자동으로 전투
   - 플레이어 개입 불가

3. **라운드 종료**
   - 승/패 판정
   - 골드 지급
   - 패배 시 체력 감소

### 2.2 승리/패배 조건
- **승리**: 최종 웨이브(라운드 10) 클리어
- **패배**: 플레이어 체력이 0 이하

---

## 3. 보드 시스템

### 3.1 보드 구성
- **크기**: 4x4 그리드 (16칸)
- **배치 영역**: 하단 2줄 (8칸) - 플레이어 유닛 배치 가능
- **전투 영역**: 상단 2줄 (8칸) - 적 유닛 스폰

```
+---+---+---+---+
| E | E | E | E |  ← 적 영역 (라운드 시작 시 적 스폰)
+---+---+---+---+
| E | E | E | E |  ← 적 영역
+---+---+---+---+
| P | P | P | P |  ← 플레이어 배치 영역
+---+---+---+---+
| P | P | P | P |  ← 플레이어 배치 영역
+---+---+---+---+
```

### 3.2 대기석 (벤치)
- **크기**: 8칸
- 구매한 유닛 임시 보관
- 보드에 배치하지 않은 유닛은 전투 참여 불가

---

## 4. 유닛 시스템

### 4.1 종족 설명

| 종족 | 설명 |
|------|------|
| 키키 | 작은 동물형/요정형 종족. 민첩하고 귀여운 외모 |
| 벨루아 | 보라색 피부의 글래머러스한 여성 종족 |
| 남자 | 인간 남성 |
| 여자 | 인간 여성 |
| 엘프 | 긴 귀를 가진 우아한 여성 종족 |
| 세라핌 | 몸집이 큰 강인한 남성 종족 |

### 4.2 무기 설명

| 무기 | 역할 | 사거리 | 특징 |
|------|------|--------|------|
| 대검 | 탱커/전사 | 근접(1) | 높은 체력, 안정적 피해 |
| 지팡이 | 마법사 | 원거리(3) | 마법 피해, 광역기 |
| 활 | 원거리 딜러 | 원거리(4) | 빠른 공격, 지속 피해 |
| 쌍검 | 암살자 | 근접(1) | 높은 공속, 치명타 |
| 권갑 | 격투가 | 근접(1) | 밸런스형, 흡혈 |

### 4.3 유닛 목록 (16종)

| 이름 | 코스트 | 무기 | 종족 | 체력 | 공격력 | 공격속도 | 사거리 | 스킬 |
|------|--------|------|------|------|--------|----------|--------|------|
| 키키 수호자 | 1 | 대검 | 키키 | 550 | 40 | 0.65 | 1 | 작은 수호 (방어력 증가) |
| 키키 요술사 | 1 | 지팡이 | 키키 | 380 | 50 | 0.6 | 3 | 반짝이는 별 (마법 피해) |
| 벨루아 무희 | 1 | 쌍검 | 벨루아 | 420 | 55 | 1.0 | 1 | 현혹의 춤 (회피 증가) |
| 농부 | 1 | 권갑 | 남자 | 500 | 45 | 0.7 | 1 | 대지의 힘 (체력 회복) |
| 사냥꾼 | 1 | 활 | 여자 | 400 | 50 | 0.85 | 4 | 속사 (연속 공격) |
| 엘프 견습생 | 1 | 지팡이 | 엘프 | 400 | 52 | 0.6 | 3 | 자연의 화살 (마법 피해) |
| 벨루아 마녀 | 2 | 지팡이 | 벨루아 | 450 | 60 | 0.55 | 3 | 매혹의 저주 (적 공격력 감소) |
| 여검사 | 2 | 대검 | 여자 | 650 | 55 | 0.6 | 1 | 칼날 폭풍 (광역 피해) |
| 기사 | 2 | 대검 | 남자 | 700 | 50 | 0.55 | 1 | 수호의 맹세 (아군 방어 증가) |
| 엘프 명사수 | 2 | 활 | 엘프 | 480 | 65 | 0.9 | 4 | 관통 화살 (방어 무시) |
| 키키 암살자 | 2 | 쌍검 | 키키 | 450 | 70 | 1.1 | 1 | 그림자 도약 (후열 공격) |
| 세라핌 투사 | 2 | 권갑 | 세라핌 | 750 | 55 | 0.65 | 1 | 분쇄의 일격 (스턴) |
| 엘프 현자 | 3 | 지팡이 | 엘프 | 520 | 80 | 0.5 | 3 | 정령의 분노 (대규모 마법) |
| 벨루아 여왕 | 3 | 쌍검 | 벨루아 | 550 | 85 | 1.15 | 1 | 치명적 유혹 (즉사 확률) |
| 세라핌 수호자 | 3 | 대검 | 세라핌 | 1000 | 65 | 0.5 | 1 | 불멸의 의지 (부활) |
| 대장군 | 3 | 권갑 | 남자 | 850 | 75 | 0.6 | 1 | 전장의 함성 (아군 버프) |

### 4.4 유닛 등급 (티어)
| 코스트 | 등급 | 상점 등장 확률 (레벨별) | 배경색 |
|--------|------|-------------------------|--------|
| 1 | 일반 | 레벨 1-3: 높음 | 회색 |
| 2 | 희귀 | 레벨 3-5: 높음 | 파랑 |
| 3 | 전설 | 레벨 5+: 높음 | 보라 |

### 4.5 유닛 합성
- **동일 유닛 3개** → **1단계 업그레이드 (★★)**
- **★★ 유닛 3개** → **2단계 업그레이드 (★★★)**

| 등급 | 체력 | 공격력 | 스킬 위력 |
|------|------|--------|-----------|
| ★ (기본) | 100% | 100% | 100% |
| ★★ | 180% | 180% | 150% |
| ★★★ | 320% | 320% | 200% |

---

## 5. 시너지 시스템

### 5.1 종족 시너지 (3종)

#### 키키 (Kiki)
> *작고 민첩한 종족. 회피와 이동에 특화*

| 활성 조건 | 효과 |
|-----------|------|
| (2) 키키 | 모든 키키 회피율 +20%, 이동속도 +15% |
| (3) 키키 | 모든 키키 회피율 +40%, 이동속도 +30%, 첫 공격 회피 보장 |

**해당 유닛**: 키키 수호자, 키키 요술사, 키키 암살자

#### 벨루아 (Velua)
> *매혹적인 힘을 지닌 종족. 적 약화와 흡수에 특화*

| 활성 조건 | 효과 |
|-----------|------|
| (2) 벨루아 | 적에게 피해 시 5% 흡혈, 적 공격력 -10% |
| (3) 벨루아 | 적에게 피해 시 12% 흡혈, 적 공격력 -20%, 스킬 위력 +25% |

**해당 유닛**: 벨루아 무희, 벨루아 마녀, 벨루아 여왕

#### 엘프 (Elf)
> *자연과 교감하는 종족. 마나와 마법에 특화*

| 활성 조건 | 효과 |
|-----------|------|
| (2) 엘프 | 모든 엘프 마나 회복 +30%, 스킬 위력 +15% |
| (3) 엘프 | 모든 엘프 마나 회복 +50%, 스킬 위력 +35%, 전투 시작 시 마나 +30 |

**해당 유닛**: 엘프 견습생, 엘프 명사수, 엘프 현자

---

### 5.2 무기 시너지 (5종)

#### 대검 (Greatsword)
> *탱커와 전사의 상징. 방어와 체력에 특화*

| 활성 조건 | 효과 |
|-----------|------|
| (2) 대검 | 모든 대검 유닛 방어력 +25, 체력 +150 |
| (3) 대검 | 모든 대검 유닛 방어력 +50, 체력 +350, 피해 감소 +10% |

**해당 유닛**: 키키 수호자, 여검사, 기사, 세라핌 수호자

#### 지팡이 (Staff)
> *마법의 도구. 스킬과 광역 피해에 특화*

| 활성 조건 | 효과 |
|-----------|------|
| (2) 지팡이 | 모든 지팡이 유닛 스킬 위력 +30% |
| (3) 지팡이 | 모든 지팡이 유닛 스킬 위력 +55%, 스킬 사용 시 주변 적에게 튀는 피해 (20%) |
| (4) 지팡이 | 모든 아군 스킬 위력 +25%, 지팡이 유닛 스킬 쿨다운 -20% |

**해당 유닛**: 키키 요술사, 엘프 견습생, 벨루아 마녀, 엘프 현자

#### 활 (Bow)
> *원거리 사격의 달인. 지속 피해와 사거리에 특화*

| 활성 조건 | 효과 |
|-----------|------|
| (2) 활 | 모든 활 유닛 공격속도 +25%, 사거리 +1 |

**해당 유닛**: 사냥꾼, 엘프 명사수

#### 쌍검 (Twin Blades)
> *암살자의 무기. 치명타와 속도에 특화*

| 활성 조건 | 효과 |
|-----------|------|
| (2) 쌍검 | 모든 쌍검 유닛 치명타 확률 +25%, 치명타 피해 +30% |
| (3) 쌍검 | 모든 쌍검 유닛 치명타 확률 +45%, 치명타 피해 +60%, 처치 시 공격속도 +20% (중첩) |

**해당 유닛**: 벨루아 무희, 키키 암살자, 벨루아 여왕

#### 권갑 (Gauntlet)
> *격투가의 상징. 밸런스와 지속력에 특화*

| 활성 조건 | 효과 |
|-----------|------|
| (2) 권갑 | 모든 권갑 유닛 공격 시 체력 8% 회복, 공격력 +15% |
| (3) 권갑 | 모든 권갑 유닛 공격 시 체력 15% 회복, 공격력 +30%, 피해 감소 +15% |

**해당 유닛**: 농부, 세라핌 투사, 대장군

---

## 6. 경제 시스템

### 6.1 골드 획득
| 항목 | 획득량 |
|------|--------|
| 라운드 기본 골드 | 5 |
| 승리 보너스 | +1 |
| 연승 보너스 (2연승) | +1 |
| 연승 보너스 (3연승) | +2 |
| 연승 보너스 (5연승+) | +3 |
| 연패 보너스 (2연패) | +1 |
| 연패 보너스 (3연패) | +2 |
| 연패 보너스 (5연패+) | +3 |

### 6.2 골드 사용
| 행동 | 비용 |
|------|------|
| 유닛 구매 | 코스트에 따름 (1/2/3) |
| 상점 리롤 | 2 |
| 경험치 구매 | 4 (경험치 4 획득) |

### 6.3 시작 자원
- **골드**: 10
- **체력**: 100

---

## 7. 레벨 시스템

### 7.1 레벨 & 배치 가능 유닛 수
| 레벨 | 필요 경험치 | 배치 가능 유닛 |
|------|-------------|----------------|
| 1 | 0 | 1 |
| 2 | 2 | 2 |
| 3 | 6 | 3 |
| 4 | 10 | 4 |
| 5 | 20 | 5 |
| 6 | 36 | 6 |

### 7.2 경험치 획득
- 라운드 종료 시: +2 XP
- 경험치 구매: +4 XP (4골드)

### 7.3 상점 확률 (레벨별)
| 레벨 | 1코스트 | 2코스트 | 3코스트 |
|------|---------|---------|---------|
| 1 | 100% | 0% | 0% |
| 2 | 100% | 0% | 0% |
| 3 | 70% | 30% | 0% |
| 4 | 50% | 40% | 10% |
| 5 | 30% | 45% | 25% |
| 6 | 20% | 40% | 40% |

---

## 8. 라운드 & 적 웨이브

### 8.1 라운드 구성 (총 10라운드)

| 라운드 | 웨이브 이름 | 적 구성 | 난이도 |
|--------|-------------|---------|--------|
| 1 | 도적 습격 | 도적 x3 | ★ |
| 2 | 늑대 무리 | 늑대 x4 | ★ |
| 3 | 산적단 | 산적 x3, 산적 두목 x1 | ★★ |
| 4 | 고블린 부대 | 고블린 x5 | ★★ |
| 5 | 오크 정찰대 | 오크 전사 x3, 오크 궁수 x2 | ★★★ |
| 6 | 언데드 출현 | 스켈레톤 x4, 네크로맨서 x1 | ★★★ |
| 7 | 암흑 기사단 | 암흑 기사 x3, 암흑 마법사 x2 | ★★★★ |
| 8 | 트롤 침공 | 트롤 x2, 트롤 주술사 x1 | ★★★★ |
| 9 | 마왕의 선봉대 | 악마 전사 x4, 악마 궁수 x2 | ★★★★★ |
| 10 | 드래곤 로드 | 드래곤 로드 x1, 드래곤 x2 | ★★★★★ (보스) |

### 8.2 패배 시 피해량
| 라운드 | 기본 피해 | 남은 적 1마리당 |
|--------|-----------|-----------------|
| 1-3 | 3 | +1 |
| 4-6 | 5 | +2 |
| 7-9 | 8 | +3 |
| 10 | 15 | +5 |

---

## 9. 전투 시스템

### 9.1 전투 흐름
1. 준비 페이즈 종료
2. 적 유닛 스폰 (상단 영역)
3. 전투 시작 (자동)
4. 한쪽 전멸 시 전투 종료
5. 결과 판정 및 보상

### 9.2 타겟팅 우선순위
1. 가장 가까운 적
2. 같은 거리일 경우: 체력이 가장 낮은 적

### 9.3 스탯 공식
- **DPS** = 공격력 × 공격속도
- **실제 피해** = 공격력 - 방어력 (최소 1)
- **스킬 충전**: 공격/피격 시 마나 +10
- **스킬 발동**: 마나 100 도달 시

---

## 10. UI/UX 설계

### 10.1 화면 구성
```
+--------------------------------------------------+
|  [HP: 100]  [Gold: 10]  [Level: 1]  [Round: 1]   |  ← 상단 정보바
+--------------------------------------------------+
|                                                  |
|              [ 4x4 게임 보드 ]                    |  ← 메인 보드
|                                                  |
+--------------------------------------------------+
|  [ 대기석 (8칸) ]                                 |  ← 벤치
+--------------------------------------------------+
|  [상점: 유닛1] [유닛2] [유닛3] [유닛4] [유닛5]     |  ← 상점
|  [리롤 2G]  [XP 구매 4G]         [전투 시작]       |  ← 액션 버튼
+--------------------------------------------------+
|  [ 활성 시너지 표시 ]                             |  ← 시너지 패널
+--------------------------------------------------+
```

### 10.2 인터랙션
- **유닛 구매**: 상점 유닛 클릭
- **유닛 배치**: 드래그 앤 드롭
- **유닛 판매**: 유닛을 상점 영역으로 드래그 (구매가의 100% 환불)
- **유닛 정보**: 유닛에 마우스 오버 시 툴팁

### 10.3 시각적 피드백
- 합성 가능 유닛: 테두리 발광
- 시너지 활성화: 해당 유닛 아이콘 표시
- 전투 중: 체력바, 마나바, 데미지 숫자 표시
- 스킬 발동: 이펙트 애니메이션

---

## 11. 기술 스택

### 11.1 프론트엔드
- **HTML5**: 구조
- **CSS3**: 스타일링, 애니메이션
- **JavaScript (ES6+)**: 게임 로직
- **Canvas API** 또는 **DOM 기반**: 렌더링

### 11.2 파일 구조 (예상)
```
/
├── index.html
├── css/
│   ├── style.css
│   ├── board.css
│   ├── units.css
│   └── animations.css
├── js/
│   ├── main.js
│   ├── game.js
│   ├── board.js
│   ├── unit.js
│   ├── shop.js
│   ├── combat.js
│   ├── synergy.js
│   └── data/
│       ├── units.js
│       └── waves.js
└── assets/
    ├── images/
    └── sounds/
```

---

## 12. 개발 우선순위

### Phase 1: 코어 시스템
1. 보드 렌더링 및 그리드 시스템
2. 유닛 데이터 구조 및 표시
3. 드래그 앤 드롭 배치
4. 기본 상점 시스템

### Phase 2: 전투 시스템
1. 자동 전투 로직
2. 타겟팅 시스템
3. 스킬 시스템
4. 전투 애니메이션

### Phase 3: 게임 시스템
1. 라운드 진행
2. 골드/경험치 시스템
3. 유닛 합성
4. 시너지 시스템

### Phase 4: 콘텐츠 & 폴리싱
1. 적 웨이브 구현
2. UI/UX 개선
3. 사운드 효과
4. 밸런스 조정

---

## 13. 향후 확장 가능성 (Out of Scope)

- 멀티플레이어 (PvP)
- 추가 유닛/시너지
- 아이템 시스템
- 업적/도전과제
- 리더보드

---

## 14. 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|-----------|
| 1.0 | 2025-12-11 | 초안 작성 |
| 1.1 | 2025-12-11 | 종족/무기 시스템 전면 개편 - 종족 6종(키키, 벨루아, 남자, 여자, 엘프, 세라핌), 무기 5종(대검, 지팡이, 활, 쌍검, 권갑) 적용. 시너지 8종(종족 3 + 무기 5)으로 확장. 유닛 16종으로 증가. |
